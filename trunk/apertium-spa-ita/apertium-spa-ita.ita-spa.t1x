<?xml version="1.0" encoding="utf-8"?> <!-- -*- nxml -*- -->
<transfer default="chunk">
  <section-def-cats>
    <def-cat n="nom">
      <cat-item tags="n.*"/>
      <cat-item tags="n.acr.*"/>   
      <cat-item tags="abbr"/>
    </def-cat>

    <def-cat n="loc">
      <cat-item tags="np.loc.*"/>
    </def-cat>
   
    <def-cat n="nom-np">
      <cat-item tags="n.*"/>
      <cat-item tags="np.loc.*"/>
      <cat-item tags="np.al"/>
    </def-cat>

    <def-cat n="al">
      <cat-item tags="np.al.*"/>
    </def-cat>

     <def-cat n="cog">
      <cat-item tags="np.cog.*"/>
    </def-cat>
 
    <def-cat n="ant">
      <cat-item tags="np.ant.*"/>
    </def-cat>

    <def-cat n="adj">
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.pos.*"/>
    </def-cat>
    
    <def-cat n="adjec">
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.pos.*"/>
      <cat-item tags="adj.ind.*"/>
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vbmod.pp.*"/>
      <cat-item tags="vbhaver.pp.*"/>
      <cat-item tags="vbser.pp.*"/>
    </def-cat>

    <def-cat n="predet">
      <cat-item tags="predet.*"/>
    </def-cat>

    <def-cat n="piu">
      <cat-item lemma="più" tags="adv"/>
    </def-cat>

    <def-cat n="det">
      <cat-item tags="det.dem.*"/>
      <cat-item tags="det.ind.*"/>
      <cat-item tags="det.def.*"/>
      <cat-item tags="det.pos.*"/>
      <cat-item tags="det.qnt.*"/>
      <cat-item tags="det.itg.*"/>
      <cat-item tags="det.ord.*"/>
      <cat-item tags="detnt"/>
      <cat-item tags="preadv"/>
      <!-- <cat-item tags="num.*"/> -->
    </def-cat>


    <def-cat n="adjdetnum">
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.ind.*"/>
      <cat-item tags="det.ind.*"/>
      <cat-item tags="num.*"/>
      <cat-item tags="num"/>
    </def-cat>


    <def-cat n="num">
      <cat-item tags="num.*"/>
      <cat-item tags="num"/>
    </def-cat>

    <def-cat n="prn">
      <cat-item tags="prn.*"/>
    </def-cat>
    
    <def-cat n="rel">
      <cat-item tags="prn.rel.*"/>
      <cat-item tags="rel.*"/>
    </def-cat>
    
    <def-cat n="prnenc">
      <cat-item tags="prn.enc.*"/>
    </def-cat>

    <def-cat n="prnpro">
      <cat-item tags="prn.pro.*"/>
    </def-cat>	

    <def-cat n="verb"> <!-- tots els verbs--> 
      <cat-item tags="vblex.*"/>
      <cat-item tags="vbser.*"/>
      <cat-item tags="vbhaver.*"/>
      <cat-item tags="vbmod.*"/>
    </def-cat>
    
    <def-cat n="mod">  
      <cat-item tags="vbmod.*"/>
    </def-cat>

    <def-cat n="imp">
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbmod.imp.*"/>
    </def-cat>
    
    <def-cat n="inf">
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbmod.inf"/>
    </def-cat>

    <def-cat n="ger">
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>

    <def-cat n="avere">
      <cat-item lemma="avere" tags="vbhaver.*"/>
      <cat-item lemma="avere" tags="vblex.*"/>
    </def-cat>


    <def-cat n="fare">
      <cat-item lemma="fare" tags="vblex.*"/>
    </def-cat>

    <def-cat n="bisogno">
      <cat-item lemma="bisogno" tags="n.m.*"/>
    </def-cat>

    <def-cat n="di">
      <cat-item lemma="di" tags="pr"/>
    </def-cat>

    <def-cat n="ci">
       <cat-item lemma= "ci" tags="prn.pro.adv"/>
    </def-cat>

    <def-cat n="essere">
      <cat-item lemma="essere" tags="vblex.*"/>
      <cat-item lemma="essere" tags="vbser.*"/>
    </def-cat>

    <def-cat n="essere-p3">
       <cat-item lemma="essere" tags="vbser.*.p3.*"/>
    </def-cat>

    <def-cat n="essere-pp">
       <cat-item lemma="essere" tags="vbser.pp.*"/>
       <cat-item lemma="stare" tags="vblex.pp.*"/>
    </def-cat>
    
    <def-cat n="venire">
      <cat-item lemma="venire" tags="vblex.*.p3.*"/>
    </def-cat>
    
    <def-cat n="stare">
      <cat-item lemma="stare" tags="vblex.*"/>
    </def-cat>

    <def-cat n="pp">
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vbser.pp.*"/>
      <cat-item tags="vbhaver.pp.*"/>
      <cat-item tags="vbmod.pp.*"/>
     </def-cat>

    <def-cat n="ppmsg">
      <cat-item tags="vblex.pp.m.sg"/>
      <cat-item tags="vbser.pp.m.sg"/>
     </def-cat>

    <def-cat n="prnref">
      <cat-item tags="prn.pro.ref.p3.mf.sp"/>
   </def-cat>
   
    <def-cat n="verbpers">
      <cat-item tags="vblex.cni.*"/>
      <cat-item tags="vblex.fti.*"/>
      <cat-item tags="vblex.ifi.*"/>
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.pii.*"/>
      <cat-item tags="vblex.pis.*"/>
      <cat-item tags="vblex.pri.*"/>
      <cat-item tags="vblex.prs.*"/>
  <!--    <cat-item tags="vbser.cni.*"/>
      <cat-item tags="vbser.fti.*"/>
      <cat-item tags="vbser.ifi.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbser.pii.*"/>
      <cat-item tags="vbser.pis.*"/>
      <cat-item tags="vbser.pri.*"/>
      <cat-item tags="vbser.prs.*"/>
      <cat-item tags="vbmod.cni.*"/>
      <cat-item tags="vbmod.fti.*"/>
      <cat-item tags="vbmod.ifi.*"/>
      <cat-item tags="vbmod.imp.*"/>
      <cat-item tags="vbmod.pii.*"/>
      <cat-item tags="vbmod.pis.*"/>
      <cat-item tags="vbmod.pri.*"/>
      <cat-item tags="vbmod.prs.*"/>-->
    </def-cat>

    <def-cat n="adv_preadv">
      <cat-item tags="adv"/>
      <cat-item tags="preadv"/>
    </def-cat>

    <def-cat n="adv">
      <cat-item tags="adv"/>
    </def-cat>


    <def-cat n="cnjcoo">
      <cat-item tags="cnjcoo"/>
    </def-cat>

    <def-cat n="cnjadv">
      <cat-item tags="cnjadv"/>
    </def-cat>

    
    <def-cat n="cnjsub">
      <cat-item tags="cnjsub"/>
    </def-cat>

    <def-cat n="prep">
      <cat-item tags="pr"/>
    </def-cat>

    <def-cat n="vb_continuare">
      <cat-item lemma="continuare" tags="vblex.*"/>
      <cat-item lemma="divertire" tags="vblex.*"/>
    </def-cat>

    <def-cat n="vb_contare">
      <cat-item lemma="contare" tags="vblex.*"/>
    </def-cat>

    <def-cat n="pr_a">
      <cat-item lemma="a" tags="pr"/>
    </def-cat>

    <def-cat n="pr_su">
      <cat-item lemma="su" tags="pr"/>
    </def-cat>
    
    <def-cat n="sent">
      <cat-item tags="sent"/>
    </def-cat>

  </section-def-cats>
  
  <section-def-attrs>
    <def-attr n="a_nom">
      <attr-item tags="n"/>
      <attr-item tags="n.acr"/>
      <attr-item tags="abbr"/>
      <attr-item tags="n.unc"/>
      <attr-item tags="np"/>
      <attr-item tags="num"/>
    </def-attr>

    <def-attr n="a_np_acr">
      <attr-item tags="np"/>
      <attr-item tags="acr"/>
    </def-attr>

    <def-attr n="a_adj">          
      <attr-item tags="adj"/>
      <attr-item tags="adj.pos"/>
      <attr-item tags="adj.sup"/>
      <attr-item tags="adj.ind"/>
      <attr-item tags="adj.itg"/>
      <attr-item tags="adj.ord"/>
      <attr-item tags="vblex"/>
      <attr-item tags="vbmod"/>
      <attr-item tags="vbhaver"/>
      <attr-item tags="vbser"/>
    </def-attr>  


    <def-attr n="a_det">
      <attr-item tags="det.dem"/>
      <attr-item tags="det.ind"/>
      <attr-item tags="adj.ind"/>
      <attr-item tags="det.def"/>
      <attr-item tags="det.pos"/>
      <attr-item tags="det.qnt"/>
      <attr-item tags="det.itg"/>
      <attr-item tags="det.ord"/>
      <attr-item tags="predet"/>
      <attr-item tags="detnt"/>
      <attr-item tags="num"/>
      <attr-item tags="preadv"/>
    </def-attr>

    <def-attr n="a_num">
      <attr-item tags="num"/>
      <attr-item tags="num.percent"/>
    </def-attr>

    <def-attr n="a_verb">
      <attr-item tags="vblex"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vbhaver"/>
      <attr-item tags="vbmod"/>
      <attr-item tags="vaux"/>
    </def-attr>

    <def-attr n="auxiliar">
      <attr-item tags="auxser"/>
    </def-attr>



    <def-attr n="pron">
      <attr-item tags="pron"/>
    </def-attr>


    <def-attr n="a_adv">
      <attr-item tags="adv"/>
      <attr-item tags="preadv"/>
      <attr-item tags="adv.itg"/>
    </def-attr>

    <def-attr n="a_pp">
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vbser.pp"/>
      <attr-item tags="vbmod.pp"/>
      <attr-item tags="vblex.sep.pp"/>
      <attr-item tags="vbser.sep.pp"/>
      <attr-item tags="vbmod.sep.pp"/>
      <attr-item tags="vaux.pp"/>
      <attr-item tags="vbhaver.pp"/>
    </def-attr>

    <def-attr n="a_prn">
      <attr-item tags="prn"/>
    </def-attr>

    <def-attr n="tipus_prn">
      <attr-item tags="subj"/>
      <attr-item tags="pro.ref"/>
      <attr-item tags="pro"/>
      <attr-item tags="rel"/>
      <attr-item tags="rel.nn"/>
      <attr-item tags="rel.aa"/>
      <attr-item tags="rel.an"/>
      <attr-item tags="rel.adv"/>
      <attr-item tags="rel.adv"/>
      <attr-item tags="obj"/>
      <attr-item tags="tn"/>
      <attr-item tags="tn.ref"/>
      <attr-item tags="itg"/>
      <attr-item tags="pos"/>
      <attr-item tags="adj.itg"/>
    </def-attr>

    <def-attr n="tipoenc_pro">
      <attr-item tags="ref.p3.mf.sp"/>
      <attr-item tags="p1.mf.pl"/>
      <attr-item tags="p1.mf.sg"/>
      <attr-item tags="p2.mf.pl"/>
      <attr-item tags="p2.mf.sg"/>
      <attr-item tags="p3.f.pl"/>
      <attr-item tags="p3.f.sg"/>
      <attr-item tags="p3.mf.pl"/>
      <attr-item tags="p3.mf.sg"/>
      <attr-item tags="p3.m.pl"/>
      <attr-item tags="p3.m.sg"/>
      <attr-item tags="p3.nt"/>
      <attr-item tags="mf.sg"/>
      <attr-item tags="adv"/>
    </def-attr>
    
    <def-attr n="pers">
      <attr-item tags="p1"/>
      <attr-item tags="p2"/>
      <attr-item tags="p3"/>
    </def-attr>

    <def-attr n="gen">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="mf"/>
      <attr-item tags="GD"/>
      <attr-item tags="nt"/>
    </def-attr>

    <def-attr n="tipus_np">
      <attr-item tags="loc"/>
      <attr-item tags="al"/>
      <attr-item tags="ant"/>
      <attr-item tags="cog"/>
    </def-attr>

    <def-attr n="tipus_det">
      <attr-item tags="def"/>
      <attr-item tags="ind"/>
    </def-attr>

    <def-attr n="gen_sense_mf">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="GD"/>
      <attr-item tags="nt"/>
    </def-attr>

    <def-attr n="gen_mf">
      <attr-item tags="mf"/>
    </def-attr>

    <def-attr n="nbr">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="sp"/>
      <attr-item tags="ND"/>
    </def-attr>

    <def-attr n="nbr_sense_sp">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="ND"/>
    </def-attr>

    <def-attr n="nbr_sp">
      <attr-item tags="sp"/>
    </def-attr>

    <def-attr n="temps">
      <attr-item tags="cni"/>
      <attr-item tags="pprs"/>
      <attr-item tags="fti"/>
      <attr-item tags="fts"/>
      <attr-item tags="ifi"/>
      <attr-item tags="imp"/>
      <attr-item tags="pii"/>
      <attr-item tags="pis"/>
      <attr-item tags="pri"/>
      <attr-item tags="prs"/>
      <attr-item tags="pp"/>
      <attr-item tags="ger"/>
      <attr-item tags="inf"/>
    </def-attr>
  </section-def-attrs>


  <section-def-vars>
    <def-var n="tipusprep"/>
    <def-var n="tipusverb"/>
    <def-var n="tipusnom"/>
    <def-var n="numero"/>
    <def-var n="persona"/>
    <def-var n="genero"/>
    <def-var n="concPrimero"/>
    <def-var n="concSegundo"/>
    <def-var n="concTercero"/>
    <def-var n="interrogativa"/>
    <def-var n="caseFirstWord"/> 
    <def-var n="lema"/>
    <def-var n="lemachunk"/>
    <def-var n="EOS" v="true"/>
  </section-def-vars>

  <section-def-lists>

 <def-list n="auxser">
      <list-item v="andare"/>
      <list-item v="arrivare"/>
      <list-item v="decedere"/>
      <list-item v="essere"/>
      <list-item v="partire"/>
      <list-item v="venire"/>
      <list-item v="stare"/>
      <list-item v="cadere"/>
      <list-item v="bastare"/>
      <list-item v="diventare"/>
      <list-item v="devenire"/>
      <list-item v="tornare"/>
      <list-item v="morire"/>
      <list-item v="piacere"/>
      <list-item v="confondere"/>
      <list-item v="salire"/>
      <list-item v="accogliere"/>

    </def-list>


    <def-list n="daysoftheweek">
      <list-item v="lunedì"/>
      <list-item v="martedì"/>
      <list-item v="mercoledì"/>
      <list-item v="giovedì"/>
      <list-item v="venerdì"/>
      <list-item v="sabato"/>
      <list-item v="domenica"/>
    </def-list>

<def-list n="prn_mete">
      <list-item v="me"/>
      <list-item v="te"/>
      <list-item v="lui"/>
      <list-item v="lei"/>
      <list-item v="noi"/>
      <list-item v="voi"/>
      <list-item v="loro"/>
    </def-list>


    <def-list n="temporales">
      <list-item v="mese"/>
      <list-item v="giorno"/>
      <list-item v="anno"/>
      <list-item v="settimana"/>
      <list-item v="tempo"/>
      <list-item v="ora"/>
      <list-item v="minuto"/>
      <list-item v="secondo"/>
      <list-item v="notte"/>
      <list-item v="pomeriggio"/>
      <list-item v="mattina"/>
      <list-item v="lustro"/>
      <list-item v="secolo"/>
      <list-item v="millenio"/>
      <list-item v="era"/>
      <list-item v="deccenio"/>
    </def-list>

    <def-list n="partoftheday">
      <list-item v="mattina"/>
      <list-item v="pomeriggio"/>
      <list-item v="sera"/>
    </def-list>

    <def-list n="meses">
      <list-item v="gennaio"/>
      <list-item v="febbraio"/>
      <list-item v="marzo"/>
      <list-item v="aprile"/>
      <list-item v="maggio"/>
      <list-item v="giugno"/>
      <list-item v="luglio"/>
      <list-item v="agosto"/>
      <list-item v="settembre"/>
      <list-item v="ottobre"/>
      <list-item v="novembre"/>
      <list-item v="dicembre"/>
    </def-list>


  </section-def-lists>


  <section-def-macros>
    <def-macro n="f_lexic" npar="1">  
     
      <choose>
	<when>
	  <test>
	    <and>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="grande"/>
	      </equal>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </and>
	  </test>
	  <let>
	    <clip pos="1" side="tl" part="lem"/>
	    <lit v="gran"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <and>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="primo"/>
	      </equal>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="m"/>
	      </equal>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </and>
	  </test>
	  <let>  
	    <clip pos="1" side="tl" part="lem"/>
	    <lit v="primer"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <and>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="terzo"/>
	      </equal>
	      <equal> 
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </and>
	  </test>
	  <let>
	    <clip pos="1" side="tl" part="lem"/>
	    <lit v="tercer"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <and>
	      <equal caseless="yes">
		<clip pos="1" side="sl" part="lem"/>
		<lit v="molto"/>
	      </equal>
	      <equal> 
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="m"/>
	      </equal>
	      <equal> 
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </equal>
	    </and>
	  </test>
	  <let>
	    <clip pos="1" side="tl" part="lem"/>
	    <lit v="muy"/>
	  </let>
          <let>
	    <clip pos="1" side="tl" part="a_adj"/>
	    <lit-tag v="preadv"/>
	  </let>

          <let>
	    <clip pos="1" side="tl" part="gen"/>
	    <lit-tag v=""/>
	  </let>
          <let>
	    <clip pos="1" side="tl" part="nbr"/>
	    <lit-tag v=""/>
	  </let>
	</when>
      </choose>
    </def-macro>


    <def-macro n="firstWord" npar="1">
      <let>
        <var n="caseFirstWord"/>
        <case-of pos="1" side="sl" part="lem"/>
      </let>
      <choose>
	<when>
	  <test>
	    <equal>
	      <case-of pos="1" side="sl" part="lem"/>
	      <lit v="Aa"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
                <and>
                  <equal>
                    <clip pos="1" side="sl" part="a_np_acr"/>
                    <lit v=""/>
                  </equal>
		  <equal> 
                    <clip pos="1" side="sl" part="a_num"/>
                    <lit v=""/>
		  </equal> 
                </and>
	      </test>
	      <modify-case>
		<clip pos="1" side="tl" part="lem"/>
		<lit v="aa"/>
	      </modify-case>
	    </when>
          </choose>
        </when>
        <when>
          <test>
            <equal>
              <case-of pos="1" side="sl" part="lem"/>
              <lit v="AA"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <equal>
                    <clip pos="1" side="sl" part="a_np_acr"/>
                    <lit v=""/>
                  </equal>
                  <equal>
                    <clip pos="1" side="sl" part="a_num"/>
                    <lit v=""/>
                  </equal>
                  <equal>
                    <var n="EOS"/>
                    <lit v="true"/>
                  </equal>
                  <!-- and length(<clip pos="1" side="sl" part="lem"/> == 1) -->
                </and>
              </test>
              <let>
                <var n="caseFirstWord"/>
                <lit v="Aa"/>
              </let>
              <modify-case>
                <clip pos="1" side="tl" part="lem"/>
                <lit v="aa"/>
              </modify-case>
            </when>
          </choose>
	</when>
      </choose>
      <let>
	<var n="EOS"/>
	<lit v="false"/>
      </let>
    </def-macro>


    <def-macro n="f_bcond" npar="2"><!--Per mirar si el blanc cont?o no format. Cal posar aquesta funci?en les regles en qu?desaparegui alguna paraula, per tal de decidir si el blanc de la paraula eliminada s'ha d'eliminar o conservar. Si cont?format cal conservar-la, si no en cont?cal eliminar-la perqu?no apareguin dos espais seguits. -->
      <choose>
	<when>
	  <test>
	    <not>
	      <equal>
		<b pos="1"/>
		<lit v=" "/>
	      </equal>
	    </not>
	  </test>
	  <out>
	    <b pos="1"/>
	  </out>
	</when>     	    
      </choose>
    </def-macro>


    <def-macro n="f_treuGDND" npar="1">
      <choose>
	<!--To determine value of variables of gender and
	    number and propagate to other rules.  Variables are
	    not used again in this rule -->
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="m"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="m"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="f"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="f"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="mf"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="mf"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="sg"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="sg"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="pl"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="pl"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <!-- If word has GD or ND, we try to assign the
		 gender or number of the previous rule. If there is no
		 value for the gender or number variable from previous
		 rules, gender will be masculine and number singular.-->
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<equal>
		  <var n="genero"/>
		  <lit-tag v="f"/>
		</equal>
	      </test>
	      <let>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="f"/>
	      </let>
	    </when>
	    <otherwise>
	      <let>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="m"/>
	      </let>
	      <let>
		<var n="genero"/>
		<lit-tag v="m"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<equal>
		  <var n="numero"/>
		  <lit-tag v="pl"/>
		</equal>
	      </test>
	      <let>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="pl"/>
	      </let>
	    </when>
	    <otherwise>
	      <let>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </let>
	      <let>
		<var n="numero"/>
		<lit-tag v="sg"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
      </choose>
    </def-macro>

    <def-macro n="f_concord1" npar="1">
      <choose>
	<!--To determine value of variables of gender and
	    number , and put in chunk tags -->
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="m"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="m"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="f"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="f"/>
	  </let>
	</when>

	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="mf"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="1" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="genero"/>
	    <clip pos="1" side="sl" part="gen"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="mf"/>
	      </equal>
	      <equal>
		<clip pos="1" side="sl" part="gen"/>
		<lit-tag v="mf"/>
	      </equal>
	    </and>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="mf"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="GD"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="sg"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="sg"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="pl"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="pl"/>
	  </let>
	</when>


	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sp"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="numero"/>
	    <clip pos="1" side="sl" part="nbr"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sp"/>
	      </equal>
	      <equal>
		<clip pos="1" side="sl" part="nbr"/>
		<lit-tag v="sp"/>
	      </equal>
	    </and>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="sp"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="ND"/>
	  </let>
	</when>
      </choose>




   <!--   <choose>
	<when>
	  <test>
	    <!-+- If word has GD or ND, we try to assign the
		 gender or number of the previous rule. If there is no
		 value for the gender or number variable from previous
		 rules, gender will be masculine and number singular.-+->
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<equal>
		  <var n="genero"/>
		  <lit-tag v="f"/>
		</equal>
	      </test>
	      <let>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="f"/>
	      </let>
	    </when>
	    <otherwise>
	      <let>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="m"/>
	      </let>
	      <let>
		<var n="genero"/>
		<lit-tag v="m"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <choose>
	    <when>
	      <test>
		<equal>
		  <var n="numero"/>
		  <lit-tag v="pl"/>
		</equal>
	      </test>
	      <let>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="pl"/>
	      </let>
	    </when>
	    <otherwise>
	      <let>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sg"/>
	      </let>
	      <let>
		<var n="numero"/>
		<lit-tag v="sg"/>
	      </let>
	    </otherwise>
	  </choose>
	</when>
      </choose> -->
    </def-macro>
    
    <def-macro n="f_concord2" npar="2">
      <choose>
	<when>
	  <test>
	    <!-- do the main and second parameter gender agree?-->
	    <and>
	      <or>
		<equal>
		  <clip pos="2" side="sl" part="gen"/>
		  <clip pos="1" side="sl" part="gen"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </or>
	      <or>
		<equal>
		  <!-- do the main and second parameter number agree?-->
		  <clip pos="2" side="sl" part="nbr"/>
		  <clip pos="1" side="sl" part="nbr"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </or>
	    </and>
	  </test>
	  <let>
	    <var n="concPrimero"/>
	    <lit v="true"/>
	  </let>
	  <!-- there is gender and number agreement-->
	</when>
	<otherwise>
	  <let>
	    <var n="concPrimero"/>
	    <lit v="false"/>
	  </let>
	  <!-- there isn't gender and number agreement-->
	</otherwise>
      </choose>
      <choose>
	<when>
	  <test>
	    <!-- Propagate the main parameter gender if it has been modified during the translation  -->
	    <and>
	      <not>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <clip pos="1" side="sl" part="gen"/>
		</equal>
	      </not>
	      <not>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </not>
	      <not>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="GD"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <choose>
	    <when>
	      <test>
		<and>
		  <not>
		    <equal>
		      <clip pos="2" side="tl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		  </not>
		  <not>
		    <and>
		      <equal>
			<clip pos="2" side="sl" part="gen"/>
			<lit-tag v="mf"/>
		      </equal>
		      <not>
			<equal>
			  <clip pos="2" side="tl" part="gen"/>
			  <lit-tag v="GD"/>
			</equal>
		      </not>
		    </and>
		  </not>
		  <equal>
		    <var n="concPrimero"/>
		    <lit v="true"/>
		  </equal>
		</and>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="gen"/>
		<clip pos="1" side="tl" part="gen"/>
	      </let>
	    </when>
	  </choose>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <!-- Propagate the main parameter number if it has been modified during the translation  -->
	    <and>
	      <not>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <clip pos="1" side="sl" part="nbr"/>
		</equal>
	      </not>
	      <not>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </not>
	      <not>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="ND"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <choose>
	    <when>
	      <test>
		<and>
		  <not>
		    <equal>
		      <clip pos="2" side="tl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		  </not>
		  <not>
		    <and>
		      <equal>
			<clip pos="2" side="sl" part="nbr"/>
			<lit-tag v="sp"/>
		      </equal>
		      <not>
			<equal>
			  <clip pos="2" side="tl" part="nbr"/>
			  <lit-tag v="ND"/>
			</equal>
		      </not>
		    </and>
		  </not>
		  <equal>
		    <var n="concPrimero"/>
		    <lit v="true"/>
		  </equal>
		</and>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="nbr"/>
		<clip pos="1" side="tl" part="nbr"/>
	      </let>
	    </when>
	  </choose>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <!-- Which is the rule general gender? -->
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="m"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="m"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="f"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="f"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="m"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="m"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="f"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="f"/>
	  </let>
	</when>
	
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="mf"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="1" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="genero"/>
	    <clip pos="1" side="sl" part="gen"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="mf"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="2" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="genero"/>
	    <clip pos="2" side="sl" part="gen"/>
	  </let>
	</when>
	<when>
	  <test>
	    <or>
	      <and>
		<equal>
		  <clip pos="2" side="tl" part="gen"/>
		  <lit-tag v="GD"/>
		</equal>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="GD"/>
		</equal>
	      </and>
	      <and>
		<equal>
		  <clip pos="2" side="tl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="GD"/>
		</equal>
	      </and>
	      <and>
		<equal>
		  <clip pos="2" side="tl" part="gen"/>
		  <lit-tag v="GD"/>
		</equal>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </and>
	    </or>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="GD"/>
	  </let>
	</when>
	<otherwise>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="m"/>
	  </let>
	</otherwise>

      </choose>
      <choose>
	<when>
	  <test>
	    <!-- Which is the rule general number? -->
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="sg"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="sg"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="pl"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="pl"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="sg"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="sg"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="pl"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="pl"/>
	  </let>
	</when>
	
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sp"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="numero"/>
	    <clip pos="1" side="sl" part="nbr"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="sp"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="numero"/>
	    <clip pos="2" side="sl" part="nbr"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	    </and>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="ND"/>
	  </let>
	</when>
	<!--       <otherwise>
	     <let>
	     <var n="genero"/>
	     <lit-tag v="m"/>
	     </let>
	     </otherwise>-->
      </choose>
      <!-- Determine gender and number value if they are undetermined -->
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="1" side="tl" part="gen"/>
	    <var n="genero"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="2" side="tl" part="gen"/>
	    <var n="genero"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="1" side="tl" part="nbr"/>
	    <var n="numero"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="2" side="tl" part="nbr"/>
	    <var n="numero"/>
	  </let>
	</when>
      </choose>
    </def-macro>
    
    <def-macro n="f_concord3" npar="3">
      <choose>
	<!-- Look whether in source language there is concordance between first and second element -->
	<when>
	  <test>
	    <and>
	      <or>
		<equal>
		  <clip pos="2" side="sl" part="gen"/>
		  <clip pos="1" side="sl" part="gen"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </or>
	      <or>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>
		  <clip pos="1" side="sl" part="nbr"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </or>
	    </and>
	  </test>
	  <let>
	    <var n="concPrimero"/>
	    <lit v="true"/>
	  </let>
	</when>
	<otherwise>
	  <let>
	    <var n="concPrimero"/>
	    <lit v="false"/>
	  </let>
	</otherwise>
      </choose>
      <choose>
	<!-- Look whether in source language there is concordance between second and third element -->
	<when>
	  <test>
	    <and>
	      <or>
		<equal>
		  <clip pos="3" side="sl" part="gen"/>
		  <clip pos="1" side="sl" part="gen"/>
		</equal>
		<equal>
		  <clip pos="3" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </or>
	      <or>
		<equal>
		  <clip pos="3" side="sl" part="nbr"/>
		  <clip pos="1" side="sl" part="nbr"/>
		</equal>
		<equal>
		  <clip pos="3" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </or>
	    </and>
	  </test>
	  <let>
	    <var n="concSegundo"/>
	    <lit v="true"/>
	  </let>
	</when>
	<otherwise>
	  <let>
	    <var n="concSegundo"/>
	    <lit v="false"/>
	  </let>
	</otherwise>
      </choose>
      <choose>
	<!-- Propagate the main parameter gender if it has been modified during the translation -->
	<when>
	  <test>
	    <and>
	      <not>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <clip pos="1" side="sl" part="gen"/>
		</equal>
	      </not>
	      <not>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </not>
	      <not>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="GD"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <choose>
	    <when>
	      <test>
		<and>
		  <not>
		    <equal>
		      <clip pos="2" side="tl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		  </not>
		  <not>
		    <and>
		      <equal>
			<clip pos="2" side="sl" part="gen"/>
			<lit-tag v="mf"/>
		      </equal>
		      <not>
			<equal>
			  <clip pos="2" side="tl" part="gen"/>
			  <lit-tag v="GD"/>
			</equal>
		      </not>
		    </and>
		  </not>
		  <equal>
		    <var n="concPrimero"/>
		    <lit v="true"/>
		  </equal>
		</and>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="gen"/>
		<clip pos="1" side="tl" part="gen"/>
	      </let>
	    </when>
	  </choose>
	  <choose>
	    <when>
	      <test>
		<and>
		  <not>
		    <equal>
		      <clip pos="3" side="tl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		  </not>
		  <not>
		    <and>
		      <equal>
			<clip pos="3" side="sl" part="gen"/>
			<lit-tag v="mf"/>
		      </equal>
		      <not>
			<equal>
			  <clip pos="3" side="tl" part="gen"/>
			  <lit-tag v="GD"/>
			</equal>
		      </not>
		    </and>
		  </not>
		  <equal>
		    <var n="concSegundo"/>
		    <lit v="true"/>
		  </equal>
		</and>
	      </test>
	      <let>
		<clip pos="3" side="tl" part="gen"/>
		<clip pos="1" side="tl" part="gen"/>
	      </let>
	    </when>
	  </choose>
	</when>
      </choose>
      <choose>
	<!-- Propagate the main parameter number if it has been modified during the translation -->
	<when>
	  <test>
	    <and>
	      <not>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <clip pos="1" side="sl" part="nbr"/>
		</equal>
	      </not>
	      <not>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </not>
	      <not>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="ND"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <choose>
	    <when>
	      <test>
		<and>
		  <not>
		    <equal>
		      <clip pos="2" side="tl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		  </not>
		  <not>
		    <and>
		      <equal>
			<clip pos="2" side="sl" part="nbr"/>
			<lit-tag v="sp"/>
		      </equal>
		      <not>
			<equal>
			  <clip pos="2" side="tl" part="nbr"/>
			  <lit-tag v="ND"/>
			</equal>
		      </not>
		    </and>
		  </not>
		  <equal>
		    <var n="concPrimero"/>
		    <lit v="true"/>
		  </equal>
		</and>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="nbr"/>
		<clip pos="1" side="tl" part="nbr"/>
	      </let>
	    </when>
	  </choose>
	  <choose>
	    <when>
	      <test>
		<and>
		  <not>
		    <equal>
		      <clip pos="3" side="tl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		  </not>
		  <not>
		    <and>
		      <equal>
			<clip pos="3" side="sl" part="nbr"/>
			<lit-tag v="sp"/>
		      </equal>
		      <not>
			<equal>
			  <clip pos="3" side="tl" part="nbr"/>
			  <lit-tag v="ND"/>
			</equal>
		      </not>
		    </and>
		  </not>
		  <equal>
		    <var n="concSegundo"/>
		    <lit v="true"/>
		  </equal>
		</and>
	      </test>
	      <let>
		<clip pos="3" side="tl" part="nbr"/>
		<clip pos="1" side="tl" part="nbr"/>
	      </let>
	    </when>
	  </choose>
	</when>
      </choose>
      <choose>
	<!-- Determine the rule general gender. Priority order: main, second and third element -->
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="m"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="m"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="f"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="f"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="m"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="m"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="f"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="f"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="3" side="tl" part="gen"/>
	      <lit-tag v="m"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="m"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="3" side="tl" part="gen"/>
	      <lit-tag v="f"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="f"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="mf"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="1" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="genero"/>
	    <clip pos="1" side="sl" part="gen"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="mf"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="2" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="genero"/>
	    <clip pos="2" side="sl" part="gen"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="3" side="tl" part="gen"/>
		<lit-tag v="mf"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="3" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="genero"/>
	    <clip pos="3" side="sl" part="gen"/>
	  </let>
	</when>
	
	<!--			<when>
	    <test>
	    <or>
	    <and>
	    <equal>
	    <clip pos="1" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	    </equal>
	    <equal>
	    <clip pos="2" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	    </equal>
	    <equal>
	    <clip pos="3" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	    </equal>
	    </and>
	    </test>
	    <let>
	    <var n="genero"/>
	    <lit-tag v="GD"/>
	    </let>
	    </when>-->
	<otherwise>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="GD"/>
	  </let>
	</otherwise>
      </choose>

      <choose>
	<!-- Determine the rule general number. Priority order: main, second and third element -->
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="sg"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="sg"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="pl"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="pl"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="sg"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="sg"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="pl"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="pl"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="sg"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="sg"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="pl"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="pl"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sp"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="numero"/>
	    <clip pos="1" side="sl" part="nbr"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="sp"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="numero"/>
	    <clip pos="2" side="sl" part="nbr"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="3" side="tl" part="nbr"/>
		<lit-tag v="sp"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="3" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="numero"/>
	    <clip pos="3" side="sl" part="nbr"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	      <equal>
		<clip pos="3" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	    </and>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="ND"/>
	  </let>
	</when>
	
      </choose>
      <choose>
	<!-- Assign values to GD and ND -->
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="1" side="tl" part="gen"/>
	    <var n="genero"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="2" side="tl" part="gen"/>
	    <var n="genero"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="3" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="3" side="tl" part="gen"/>
	    <var n="genero"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="1" side="tl" part="nbr"/>
	    <var n="numero"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="2" side="tl" part="nbr"/>
	    <var n="numero"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="3" side="tl" part="nbr"/>
	    <var n="numero"/>
	  </let>
	</when>
      </choose>
    </def-macro>
    
    <def-macro n="f_concord4" npar="4">
      <choose>
	<when>
	  <test>
	    <and>
	      <or>
		<equal>
		  <clip pos="2" side="sl" part="gen"/>
		  <clip pos="1" side="sl" part="gen"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </or>
	      <or>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>
		  <clip pos="1" side="sl" part="nbr"/>
		</equal>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </or>
	    </and>
	  </test>
	  <let>
	    <var n="concPrimero"/>
	    <lit v="true"/>
	  </let>
	</when>
	<otherwise>
	  <let>
	    <var n="concPrimero"/>
	    <lit v="false"/>
	  </let>
	</otherwise>
      </choose>
      <choose>
	<when>
	  <test>
	    <and>
	      <or>
		<equal>
		  <clip pos="3" side="sl" part="gen"/>
		  <clip pos="1" side="sl" part="gen"/>
		</equal>
		<equal>
		  <clip pos="3" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </or>
	      <or>
		<equal>
		  <clip pos="3" side="sl" part="nbr"/>
		  <clip pos="1" side="sl" part="nbr"/>
		</equal>
		<equal>
		  <clip pos="3" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </or>
	    </and>
	  </test>
	  <let>
	    <var n="concSegundo"/>
	    <lit v="true"/>
	  </let>
	</when>
	<otherwise>
	  <let>
	    <var n="concSegundo"/>
	    <lit v="false"/>
	  </let>
	</otherwise>
      </choose>
      <choose>
	<when>
	  <test>
	    <and>
	      <or>
		<equal>
		  <clip pos="4" side="sl" part="gen"/>
		  <clip pos="1" side="sl" part="gen"/>
		</equal>
		<equal>
		  <clip pos="4" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </or>
	      <or>
		<equal>
		  <clip pos="4" side="sl" part="nbr"/>
		  <clip pos="1" side="sl" part="nbr"/>
		</equal>
		<equal>
		  <clip pos="4" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </or>
	    </and>
	  </test>
	  <let>
	    <var n="concTercero"/>
	    <lit v="true"/>
	  </let>
	</when>
	<otherwise>
	  <let>
	    <var n="concTercero"/>
	    <lit v="false"/>
	  </let>
	</otherwise>
      </choose>
      <choose>
	<when>
	  <test>
	    <and>
	      <not>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <clip pos="1" side="sl" part="gen"/>
		</equal>
	      </not>
	      <not>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </not>
	      <not>
		<equal>
		  <clip pos="1" side="tl" part="gen"/>
		  <lit-tag v="GD"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <choose>
	    <when>
	      <test>
		<and>
		  <not>
		    <equal>
		      <clip pos="2" side="tl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		  </not>
		  <not>
		    <and>
		      <equal>
			<clip pos="2" side="sl" part="gen"/>
			<lit-tag v="mf"/>
		      </equal>
		      <not>
			<equal>
			  <clip pos="2" side="tl" part="gen"/>
			  <lit-tag v="GD"/>
			</equal>
		      </not>
		    </and>
		  </not>
		  <equal>
		    <var n="concPrimero"/>
		    <lit v="true"/>
		  </equal>
		</and>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="gen"/>
		<clip pos="1" side="tl" part="gen"/>
	      </let>
	    </when>
	  </choose>
	  <choose>
	    <when>
	      <test>
		<and>
		  <not>
		    <equal>
		      <clip pos="3" side="tl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		  </not>
		  <not>
		    <and>
		      <equal>
			<clip pos="3" side="sl" part="gen"/>
			<lit-tag v="mf"/>
		      </equal>
		      <not>
			<equal>
			  <clip pos="3" side="tl" part="gen"/>
			  <lit-tag v="GD"/>
			</equal>
		      </not>
		    </and>
		  </not>
		  <equal>
		    <var n="concSegundo"/>
		    <lit v="true"/>
		  </equal>
		</and>
	      </test>
	      <let>
		<clip pos="3" side="tl" part="gen"/>
		<clip pos="1" side="tl" part="gen"/>
	      </let>
	    </when>
	  </choose>
	  <choose>
	    <when>
	      <test>
		<and>
		  <not>
		    <equal>
		      <clip pos="4" side="tl" part="gen"/>
		      <lit-tag v="mf"/>
		    </equal>
		  </not>
		  <not>
		    <and>
		      <equal>
			<clip pos="4" side="sl" part="gen"/>
			<lit-tag v="mf"/>
		      </equal>
		      <not>
			<equal>
			  <clip pos="4" side="tl" part="gen"/>
			  <lit-tag v="GD"/>
			</equal>
		      </not>
		    </and>
		  </not>
		  <equal>
		    <var n="concTercero"/>
		    <lit v="true"/>
		  </equal>
		</and>
	      </test>
	      <let>
		<clip pos="4" side="tl" part="gen"/>
		<clip pos="1" side="tl" part="gen"/>
	      </let>
	    </when>
	  </choose>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <and>
	      <not>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <clip pos="1" side="sl" part="nbr"/>
		</equal>
	      </not>
	      <not>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </not>
	      <not>
		<equal>
		  <clip pos="1" side="tl" part="nbr"/>
		  <lit-tag v="ND"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <choose>
	    <when>
	      <test>
		<and>
		  <not>
		    <equal>
		      <clip pos="2" side="tl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		  </not>
		  <not>
		    <and>
		      <equal>
			<clip pos="2" side="sl" part="nbr"/>
			<lit-tag v="sp"/>
		      </equal>
		      <not>
			<equal>
			  <clip pos="2" side="tl" part="nbr"/>
			  <lit-tag v="ND"/>
			</equal>
		      </not>
		    </and>
		  </not>
		  <equal>
		    <var n="concPrimero"/>
		    <lit v="true"/>
		  </equal>
		</and>
	      </test>
	      <let>
		<clip pos="2" side="tl" part="nbr"/>
		<clip pos="1" side="tl" part="nbr"/>
	      </let>
	    </when>
	  </choose>
	  <choose>
	    <when>
	      <test>
		<and>
		  <not>
		    <equal>
		      <clip pos="3" side="tl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		  </not>
		  <not>
		    <and>
		      <equal>
			<clip pos="3" side="sl" part="nbr"/>
			<lit-tag v="sp"/>
		      </equal>
		      <not>
			<equal>
			  <clip pos="3" side="tl" part="nbr"/>
			  <lit-tag v="ND"/>
			</equal>
		      </not>
		    </and>
		  </not>
		  <equal>
		    <var n="concSegundo"/>
		    <lit v="true"/>
		  </equal>
		</and>
	      </test>
	      <let>
		<clip pos="3" side="tl" part="nbr"/>
		<clip pos="1" side="tl" part="nbr"/>
	      </let>
	    </when>
	  </choose>
	  <choose>
	    <when>
	      <test>
		<and>
		  <not>
		    <equal>
		      <clip pos="4" side="tl" part="nbr"/>
		      <lit-tag v="sp"/>
		    </equal>
		  </not>
		  <not>
		    <and>
		      <equal>
			<clip pos="4" side="sl" part="nbr"/>
			<lit-tag v="sp"/>
		      </equal>
		      <not>
			<equal>
			  <clip pos="4" side="tl" part="nbr"/>
			  <lit-tag v="ND"/>
			</equal>
		      </not>
		    </and>
		  </not>
		  <equal>
		    <var n="concTercero"/>
		    <lit v="true"/>
		  </equal>
		</and>
	      </test>
	      <let>
		<clip pos="4" side="tl" part="nbr"/>
		<clip pos="1" side="tl" part="nbr"/>
	      </let>
	    </when>
	  </choose>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="m"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="m"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="f"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="f"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="m"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="m"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="f"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="f"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="3" side="tl" part="gen"/>
	      <lit-tag v="m"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="m"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="3" side="tl" part="gen"/>
	      <lit-tag v="f"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="f"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="m"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="m"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="f"/>
	    </equal>
	  </test>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="f"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="mf"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="1" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="genero"/>
	    <clip pos="1" side="sl" part="gen"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="2" side="tl" part="gen"/>
		<lit-tag v="mf"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="2" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="genero"/>
	    <clip pos="2" side="sl" part="gen"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="3" side="tl" part="gen"/>
		<lit-tag v="mf"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="3" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="genero"/>
	    <clip pos="3" side="sl" part="gen"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="4" side="tl" part="gen"/>
		<lit-tag v="mf"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="4" side="sl" part="gen"/>
		  <lit-tag v="mf"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="genero"/>
	    <clip pos="4" side="sl" part="gen"/>
	  </let>
	</when>
	<otherwise>
	  <let>
	    <var n="genero"/>
	    <lit-tag v="GD"/>
	  </let>
	</otherwise>
	<!--				<when>
	    <test>
	    <and>
	    <equal>
	    <clip pos="1" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	    </equal>
	    <equal>
	    <clip pos="2" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	    </equal>
	    <equal>
	    <clip pos="3" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	    </equal>
	    <equal>
	    <clip pos="4" side="tl" part="gen"/>
	    <lit-tag v="GD"/>
	    </equal>
	    </and>
	    </test>
	    <let>
	    <var n="genero"/>
	    <lit-tag v="GD"/>
	    </let>
	    </when>-->
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="sg"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="sg"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="pl"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="pl"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="sg"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="sg"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="pl"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="pl"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="sg"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="sg"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="pl"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="pl"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="sg"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="sg"/>
	  </let>
	</when>
	<when>
	  <test>
	    <equal>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="pl"/>
	    </equal>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="pl"/>
	  </let>
	</when>
	

	<!--<when>
	    <test>
	    <and>
	    <equal>
	    <clip pos="1" side="tl" part="nbr"/>
	    <lit-tag v="ND"/>
	    </equal>
	    <equal>
	    <clip pos="2" side="tl" part="nbr"/>
	    <lit-tag v="ND"/>
	    </equal>
	    <equal>
	    <clip pos="3" side="tl" part="nbr"/>
	    <lit-tag v="ND"/>
	    </equal>
	    <equal>
	    <clip pos="4" side="tl" part="nbr"/>
	    <lit-tag v="ND"/>
	    </equal>
	    </and>
	    </test>
	    <let>
	    <var n="numero"/>
	    <lit-tag v="ND"/>
	    </let>
	    </when>-->
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="sp"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="1" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="numero"/>
	    <clip pos="1" side="sl" part="nbr"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="sp"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="2" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="numero"/>
	    <clip pos="2" side="sl" part="nbr"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="3" side="tl" part="nbr"/>
		<lit-tag v="sp"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="3" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="numero"/>
	    <clip pos="3" side="sl" part="nbr"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="4" side="tl" part="nbr"/>
		<lit-tag v="sp"/>
	      </equal>
	      <not>
		<equal>
		  <clip pos="4" side="sl" part="nbr"/>
		  <lit-tag v="sp"/>
		</equal>
	      </not>
	    </and>
	  </test>
	  <let>
	    <var n="numero"/>
	    <clip pos="4" side="sl" part="nbr"/>
	  </let>
	</when>
	<when>
	  <test>
	    <and>
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	      <equal>
		<clip pos="2" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	      <equal>
		<clip pos="3" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	      <equal>
		<clip pos="4" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	    </and>
	  </test>
	  <let>
	    <var n="numero"/>
	    <lit-tag v="ND"/>
	  </let>
	</when>
	
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="1" side="tl" part="gen"/>
	    <var n="genero"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="2" side="tl" part="gen"/>
	    <var n="genero"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="3" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="3" side="tl" part="gen"/>
	    <var n="genero"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="4" side="tl" part="gen"/>
	      <lit-tag v="GD"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="4" side="tl" part="gen"/>
	    <var n="genero"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="1" side="tl" part="nbr"/>
	    <var n="numero"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="2" side="tl" part="nbr"/>
	    <var n="numero"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="3" side="tl" part="nbr"/>
	    <var n="numero"/>
	  </let>
	</when>
      </choose>
      <choose>
	<when>
	  <test>
	    <equal>
	      <clip pos="4" side="tl" part="nbr"/>
	      <lit-tag v="ND"/>
	    </equal>
	  </test>
	  <let>
	    <clip pos="4" side="tl" part="nbr"/>
	    <var n="numero"/>
	  </let>
	</when>
      </choose>
    </def-macro>

  </section-def-macros> 

  <section-rules>




    <!--*************************************** REGLES DE SN ******************************************** -->

    <rule comment="REGLA: NOM (multiwords like corporate tax = impuesto de sociedades">
      <pattern>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord1">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGLA: NOM NOM (lunedì sera = el lunes por la noche">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when> <!-- Caso particular: NOM(día_de_la_daysoftheweek) NOM("mattina|pomeriggio|sera") -> "El" día_de_la_daysoftheweek "por la mañana|tarde|noche" -->
            <test>
              <and>
                <in caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <list n="daysoftheweek"/>
                </in>
                <in caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <list n="partoftheday"/>
                </in>
              </and>
            </test>
            <choose> <!-- comprobación del número -->
              <when>
                <test> <!-- f_concord1 no determina el número concreto para el det -->
                  <equal>
                    <var n="numero"/>
                    <lit-tag v="sp"/>
                  </equal>
                </test>
                <let>
                  <var n="numero"/>
                  <lit-tag v="sg"/>
                </let>
              </when>
            </choose>
            <out>
              <chunk name="nom_daysoftheweek" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <lit v="el"/>
                  <lit-tag v="det"/>
                  <lit-tag v="def"/>
                  <clip pos="1" side="tl" part="gen"/>
                  <var n="numero"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="1" side="tl" part="whole"/> 
                </lu>
                <b/>
                <lu>
                  <lit v="por"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <lit v="el"/>
                  <lit-tag v="det"/>
                  <lit-tag v="def"/>
                  <clip pos="2" side="tl" part="gen"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise> <!-- Caso general: NOM NOM (macchina bomba = coche + bomba) -->
            <out>
              <chunk name="nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/> 
                  <clip pos="1" side="tl" part="a_nom"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>  
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="1"/>
            </out>
            <call-macro n="firstWord">
              <with-param pos="2"/>
            </call-macro>
            <call-macro n="f_concord1">
              <with-param pos="2"/>
            </call-macro>
            <out>
              <chunk name="nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/> 
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>  
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>

    <rule comment="REGLA: TOPÒNIM (Sofia -> Sofía)"> 
      <pattern>
	<pattern-item n="loc"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="loc" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="tipus_np"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGLA: COGNOMEN (Vasallo -> Vasallo)">
      <pattern>
	<pattern-item n="cog"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="cog" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="tipus_np"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGLA: ALTRES">
      <pattern>
	<pattern-item n="al"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="al" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="tipus_np"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGLA: ANTROPÒNIM (Alfonso -> Alfonso)">
      <pattern>
	<pattern-item n="ant"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="ant" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="tipus_np"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGLA: DET NOM (Il bambino -> El niño)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>

            <out>
              <chunk name="det_nom" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/> 
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>  
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>  
                </lu> 
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/> 
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>  
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
      </action>
    </rule>




<rule comment="REGLA: A.PREP NOM (mesesdelaño) (A gennaio -> En enero)"> <!-- REVISADA POR GEMA  -->
      <pattern>
	<pattern-item n="pr_a"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <choose>
	  <when>
	    <test>
	    <in caseless="yes">
	      <clip pos="2" side="sl" part="lem"/>
	      <list n="meses"/>
	    </in>
	    </test>
	    <out>
	      <chunk name="prep_nom_meses" case="caseFirstWord">
	        <tags>
	          <tag><lit-tag v="SPREP"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
	        </tags>
	        <lu>
                  <lit v="en"/>
                  <lit-tag v="pr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/> 
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>  
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>   
                </lu>
	      </chunk>
	    </out>
          </when>  
          <otherwise>
            <out>
	      <chunk name="prep_nom" case="caseFirstWord">
	        <tags>
	          <tag><lit-tag v="SPREP"/></tag>
                  <tag><var n="genero"/></tag>
                  <tag><var n="numero"/></tag>
	        </tags>
	        <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/> 
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>  
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>   
                </lu>
	      </chunk>
	    </out>
          </otherwise>
        </choose>
      </action>
    </rule>

    <rule comment="REGLA: PREDET DET NOM (Tutti i giorni -> Todos los días)">
      <pattern>
	<pattern-item n="predet"/>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord3">
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk name="predet_det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="3" side="tl" part="gen_mf"/>	 
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGLA: PREDET DET ADJ NOM (Tutte le belle ragazze -> Todas las bonitas chicas)"> 
      <pattern>
	<pattern-item n="predet"/>
	<pattern-item n="det"/>
        <pattern-item n="adj"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord4">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
        <call-macro n="f_lexic">
          <with-param pos="3"/>
        </call-macro>
	<out>
	  <chunk name="predet_det_adj_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>
	    </lu> 
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_det"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="3" side="tl" part="gen_mf"/>	 
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>
	    </lu>
            <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="4" side="tl" part="gen_mf"/>	 
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGLA: DET NUM (Il primo -> El primero)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>

	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	
	<out>
	  <chunk name="det_num" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	    </lu> 
	    <b pos="1"/>
	    <lu>     
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	    </lu>
	  </chunk>
	</out>	  
      </action>
    </rule>

    <rule comment="REGLA: NUM NOM (Una mucca -> Una vaca)"> 
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	    <out>  
	      <chunk name="num_nom" case="caseFirstWord">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		  <tag><var n="genero"/></tag>
		  <tag><var n="numero"/></tag>
		</tags>
		<lu>   
		  <clip pos="1" side="tl" part="lem"/> 
		  <clip pos="1" side="tl" part="a_num"/>
		  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
		  <clip pos="1" side="tl" part="gen_mf"/>	 
		  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
		  <clip pos="1" side="tl" part="nbr_sp"/>	 
		</lu> 
		<b pos="1"/>
		<lu>     
		  <clip pos="2" side="tl" part="lemh"/> 
		  <clip pos="2" side="tl" part="a_nom"/>
		  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
		  <clip pos="2" side="tl" part="gen_mf"/>	 
		  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
		  <clip pos="2" side="tl" part="nbr_sp"/>	 
		  <clip pos="2" side="tl" part="lemq"/>
		</lu>
	      </chunk>
	    </out>
      </action>
    </rule>



    <rule comment="REGLA: NOM ADJ (Donna bella -> Mujer bonita)"> 
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adjec"/>
      </pattern>
      <action>
	<call-macro n="f_concord2">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	
	<out>
	  <chunk name="nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="temps"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGLA: ADJ NOM (Importante lavoro -> Importante trabajo)">
      <pattern>
	<pattern-item n="adjec"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="f_lexic">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="adj_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="temps"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGLA: DET ADJ ADJ NOM (La gran intelligente donna -> La gran inteligente mujer)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adjec"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="f_concord3">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="f_lexic">
	  <with-param pos="3"/>
	</call-macro>
	<out>
	  <chunk name="det_adv_adj_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="temps"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="3" side="tl" part="gen_mf"/>	 
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>	 
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="4" side="tl" part="gen_mf"/>	 
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>	 
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="DET NUMERAL NOM (La seconda professoressa -> La segunda profesora)"> 
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord3">
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>
	<call-macro n="f_concord3">
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	</call-macro>	
	<out>
	  <chunk name="det_num_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lem"/> 
	      <clip pos="2" side="tl" part="a_num"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="3" side="tl" part="gen_mf"/>	 
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>	 
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGLA: NOM ADJ ADJ (">
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adjec"/>
	<pattern-item n="adjec"/>
      </pattern>
      <action>
	<call-macro n="f_concord3">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="nom_adj_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="temps"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="temps"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="3" side="tl" part="gen_mf"/>	 
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>	 
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>
    
    <rule comment="REGLA: DET NOM ADJ (La nave grande -> El barco grande)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjec"/>
      </pattern>
      <action>
	<call-macro n="f_concord3">
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test> 
	      <equal>
		<clip pos="3" side="sl" part="a_adj"/>
		<lit-tag v="adj.pos"/>
	      </equal>
	    </test>
	<out>
	  <chunk name="det_adj_nom" case="caseFirstWord"> 
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="temps"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="3" side="tl" part="gen_mf"/>	 
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>	 
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	  </when>
	  <otherwise>

	<out>
	  <chunk name="det_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="temps"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="3" side="tl" part="gen_mf"/>	 
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>	 
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
	  </otherwise>
	</choose>
      </action>
    </rule>
    
    <rule comment="REGLA: DET ADJ (L'alto -> El alto), (L'abbandonato -> El abandonado)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adjec"/>
      </pattern>
      <action>
	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <call-macro n="f_lexic">
          <with-param pos="1"/>
        </call-macro>
	<choose>
	  <when>
	    <test>
	      <equal>
		<clip pos="2" side="tl" part="a_adj"/>
		<lit-tag v="vblex"/>
	      </equal>
	    </test>
	    <let>
	      <var n="lemachunk"/>
	      <lit v="det_pp"/> 
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="lemachunk"/>
	      <lit v="det_adj"/> 
	    </let>
	  </otherwise>		
	</choose>
	<out>
	  <chunk namefrom="lemachunk" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="temps"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>
    
    <rule comment="REGLA: DET ADJ NOM (La gran casa -> La gran casa)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adjec"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="f_concord3">
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="f_lexic">
	  <with-param pos="2"/>
	</call-macro>
        <call-macro n="f_lexic">
          <with-param pos="1"/>
        </call-macro>
	<out>
	  <chunk name="det_adj_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="temps"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="3" side="tl" part="gen_mf"/>	 
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>	 
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>
    
    <rule comment="REGLA: DET ADJ cnj	 ADJ NOM (Il saggio e gentile uomo -> El sabio y amable hombre)">
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="adjec"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adjec"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="f_concord4">
	  <with-param pos="5"/>
	  <with-param pos="2"/>
	  <with-param pos="4"/>
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="f_lexic">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="f_lexic">
	  <with-param pos="4"/>
	</call-macro>
	<out>
	  <chunk name="det_adj_cnjcoo_adj_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="temps"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="temps"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="4" side="tl" part="gen_mf"/>	 
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>	 
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="5" side="tl" part="gen_mf"/>	 
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>	 
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>
    
    <rule comment="REGLA: NUM ADV ADJ NOM (Un molto buon giorno -> Un muy buen día)">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="adv"/>
	<pattern-item n="adjec"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="f_concord3">
	  <with-param pos="4"/>
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="f_lexic">
	  <with-param pos="3"/>
	</call-macro>
	<out>
	  <chunk name="num_adv_adj_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_num"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="temps"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="3" side="tl" part="gen_mf"/>	 
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>	 
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_nom"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="4" side="tl" part="gen_mf"/>	 
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>	 
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>
    
    <rule comment="REGLA: NUM ADJ NOM (Tre enormi piante -> Tres enormes plantas)">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="adjec"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="f_concord3">
	  <with-param pos="3"/>
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="f_lexic">
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk name="num_adj_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_num"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="temps"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="3" side="tl" part="gen_mf"/>	 
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>	 
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>
    
    <rule comment="REGLA: NUM ADJ cnj ADJ NOM (Una gentile e simpatica persona -> Una amable y simpática persona)">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="adjec"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adjec"/>
	<pattern-item n="nom"/>
      </pattern>
      <action>
	<call-macro n="f_concord4">
	  <with-param pos="5"/>
	  <with-param pos="2"/>
	  <with-param pos="4"/>
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="f_lexic">
	  <with-param pos="2"/>
	</call-macro>	
	<call-macro n="f_lexic">
	  <with-param pos="4"/>
	</call-macro>
	<out>
	  <chunk name="num_adj_cnjcoo_adj_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_num"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="temps"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/>
	    </lu> 
	    <b pos="3"/>
	    
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="temps"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="4" side="tl" part="gen_mf"/>	 
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>	 
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/> 
	      <clip pos="5" side="tl" part="a_nom"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="5" side="tl" part="gen_mf"/>	 
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>	 
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>
    
    
    <rule comment="REGLA: NUM NOM ADJ (Mille persone ammirevoli -> Mil personas admirables)">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjec"/>
      </pattern>
      <action>
	<call-macro n="f_concord3">
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="num_nom_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_num"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="temps"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="3" side="tl" part="gen_mf"/>	 
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>	 
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGLA: NOM ADV ADJ (Uomo molto vecchio -> Hombre muy viejo)">
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adjec"/>
      </pattern>
      <action>
	<call-macro n="f_concord2">
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	</call-macro>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/> 
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="temps"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="3" side="tl" part="gen_mf"/>	 
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>	 
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>
    
    <rule comment="REGLA: DET NOM ADV ADJ (Un bimbo molto attivo -> Un niño muy activo)"> 
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adjec"/>
      </pattern>
      <action>
	<call-macro n="f_concord3">
	  <with-param pos="2"/>
	  <with-param pos="4"/>
	  <with-param pos="1"/>
	</call-macro>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="temps"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="4" side="tl" part="gen_mf"/>	 
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>	 
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>
    

    <rule comment="REGLA: NUM NOM ADV ADJ (Due cani molto malati -> Dos perros muy enfermos)">
      <pattern>
	<pattern-item n="num"/>
	<pattern-item n="nom"/>
	<pattern-item n="adv_preadv"/>
	<pattern-item n="adjec"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord3">
	  <with-param pos="2"/>
	  <with-param pos="4"/>
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="num_nom_adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_num"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="temps"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="4" side="tl" part="gen_mf"/>	 
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>	 
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>
    
    <rule comment="REGLA: NOM ADJ cnjcoo ADJ (Stella brillante e piccola -> Estrella brillante y pequeña)">
      <pattern>
	<pattern-item n="nom"/>
	<pattern-item n="adjec"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adjec"/>
      </pattern>
      <action>
	<call-macro n="f_concord3">
	  <with-param pos="1"/>
	  <with-param pos="2"/>
	  <with-param pos="4"/>
	</call-macro>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="nom_adj_cnjcoo_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_nom"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/>
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="temps"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="whole"/> 
	    </lu>
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="lemh"/>
	      <clip pos="4" side="tl" part="a_adj"/>
	      <clip pos="4" side="tl" part="temps"/>
	      <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="4" side="tl" part="gen_mf"/>	 
	      <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="4" side="tl" part="nbr_sp"/>	 
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>
    
    <rule comment="REGLA: DET NOM ADJ cnjcoo ADJ (Il gatto grigio e peloso -> El gato gris y peludo)"> 
      <pattern>
	<pattern-item n="det"/>
	<pattern-item n="nom"/>
	<pattern-item n="adjec"/>
	<pattern-item n="cnjcoo"/>
	<pattern-item n="adjec"/>
      </pattern>
      <action>
	<call-macro n="f_concord4">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	  <with-param pos="3"/>
	  <with-param pos="5"/>
	</call-macro>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="det_nom_adj_cnjcoo_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	    </lu>
	    <b pos="1"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/>
	      <clip pos="3" side="tl" part="a_adj"/>
	      <clip pos="3" side="tl" part="temps"/>
	      <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="3" side="tl" part="gen_mf"/>	 
	      <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="3" side="tl" part="nbr_sp"/>	 
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="3"/>
	    <lu>
	      <clip pos="4" side="tl" part="whole"/> 
	    </lu>
	    <b pos="4"/>
	    <lu>
	      <clip pos="5" side="tl" part="lemh"/>
	      <clip pos="5" side="tl" part="a_adj"/>
	      <clip pos="5" side="tl" part="temps"/>
	      <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="5" side="tl" part="gen_mf"/>	 
	      <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="5" side="tl" part="nbr_sp"/>	 
	      <clip pos="5" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGLA: PIU ADJ DI (Più alto della mamma : Más alto que la mamá)">
      <pattern>
	<pattern-item n="piu"/>
	<pattern-item n="adj"/>
	<pattern-item n="di"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord1">
	  <with-param pos="2"/>
	</call-macro>
	<out>
	  <chunk name="adv_adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_adj"/>
	      <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="2" side="tl" part="gen_mf"/>	 
	      <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="2" side="tl" part="nbr_sp"/>	 
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
          </chunk>
	  <b pos="2"/>
	  <chunk name="rel" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="rel.an.mf.sp"/></tag>
	    </tags>
	    <lu>
	      <lit v="que"/>
	      <lit-tag v="rel.an.mf.sp"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

  
   <rule comment="REGLA: PIU DI  Revisar! (corre più della tua : corre más que la tuya; voglio più di trè cose : quiero más *que tres cosas">
      <pattern>
	<pattern-item n="piu"/>
	<pattern-item n="di"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
              <tag><lit-tag v="ADV-comp"/></tag>
	    </tags>
	    <lu>
              <clip pos="1" side="tl" part="whole"/> 
	    </lu>
        <b pos="1"/>
	    <lu>
	      <lit v="que"/>
	      <lit-tag v="rel.an.mf.sp"/>
	    </lu>
	  </chunk>
	  </out>
      </action>
    </rule>
    
    
    
    <rule comment="REGLA: PIU DI PRN">
      <pattern>
        <pattern-item n="piu"/>
	    <pattern-item n="di"/>
        <pattern-item n="prn"/>
      </pattern>
      <action>
     <call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
    <call-macro n="f_treuGDND">
	  <with-param pos="3"/>
	</call-macro>
    <choose>
	  <when>
	    <test>
	      <equal>
		   <clip pos="3" side="sl" part="lem"/>
		    <lit v="me"/>
	      </equal>
	    </test>
	    <let>
	       <clip pos="3" side="tl" part="lem"/>
	      <lit v="yo"/> 
	    </let>
	  </when>
	  <otherwise>
      <choose>
	  <when>
	    <test>
	      <equal>
		   <clip pos="3" side="sl" part="lem"/>
		    <lit v="te"/>
	      </equal>
	    </test>
	    <let>
	       <clip pos="3" side="tl" part="lem"/>
	      <lit v="tú"/> 
	    </let>
	  </when>
	</choose>
	  </otherwise>		
	</choose>

     <out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
          <tag><lit-tag v="ADV-comp"/></tag>
	    </tags>
	    <lu>
          <clip pos="1" side="tl" part="whole"/> 
	    </lu>
        <b pos="1"/>
	    <lu>
	      <lit v="que"/>
	      <lit-tag v="rel.an.mf.sp"/>
	    </lu>
        <b pos="2"/>
             <lu>
             <clip pos="3" side="tl" part="lem"/>
             <clip pos="3" side="tl" part="a_prn"/>
             <clip pos="3" side="tl" part="tipus_prn"/>
             <clip pos="3" side="tl" part="pers"/>
             <clip pos="3" side="tl" part="gen"/>
             <clip pos="3" side="tl" part="nbr"/>
            </lu>
	  </chunk>
	  </out>
      </action>
    </rule>
    
    
    
    


    <rule comment="REGLA: ADJECTIU (quan no acompanya res o va amb desconeguda) (Bello -> Bonito)">
      <pattern>
	<pattern-item n="adj"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="f_concord1">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="adj" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><var n="genero"/></tag>
	      <tag><var n="numero"/></tag>
	     <!-- <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag> -->
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="temps"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule> 
    
 


<rule comment="REGLA: cnjsub  (Affinché -> Para que)">
      <pattern>
	<pattern-item n="cnjsub"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="cnjsub" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="CS"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

<rule comment="REGLA: cnjcoo (Né -> Ni) ">
      <pattern>
	<pattern-item n="cnjcoo"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="cnjcoo" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="CC"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


<rule comment="REGLA: cnjadv (Malgrado -> A pesar de que)">
      <pattern>
	<pattern-item n="cnjadv"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="cnjadv" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="CADV"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

<rule comment="REGLA: ADV">
      <pattern>
	<pattern-item n="adv"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="adv" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="ADV"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

<rule comment="REGLA: PREP ">
      <pattern>
	<pattern-item n="prep"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <let>
         <var n="lemachunk"/>
         <clip pos="1" side="sl" part="lem"/> 
        </let>
	<out>
	  <chunk namefrom="lemachunk" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="PREP"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="whole"/> 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>


    <rule comment="REGLA: DET(quan no acompanya res o va amb desconeguda) (Alcun -> Algún)">
      <pattern>
	<pattern-item n="det"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="det" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="DET"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule> 


      <rule comment="REGLA: NUM (quan no acompanya res o va amb desconeguda)">
      <pattern>
	<pattern-item n="num"/>
      </pattern>
      <action>
	<call-macro n="f_treuGDND">
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="num" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="NUM"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lem"/> 
	      <clip pos="1" side="tl" part="a_det"/>
	      <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
	      <clip pos="1" side="tl" part="gen_mf"/>	 
	      <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
	      <clip pos="1" side="tl" part="nbr_sp"/>	 
	    </lu> 
	  </chunk>
	</out>
	<let>
	  <var n="caseFirstWord"/>
	  <lit v="aa"/>
	</let>
      </action>
    </rule> 
    
    <rule comment="REGLA: PRONOM (Chiunque -> Sea quien sea)"> 
      <pattern>
	<pattern-item n="prn"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test> 
	      <equal>
		<clip pos="1" side="tl" part="gen"/>
		<lit-tag v="GD"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="gen"/>
	      <lit-tag v="m"/>
	    </let>
	  </when>
	</choose>
	<choose>
	  <when>
	    <test> 
	      <equal>
		<clip pos="1" side="tl" part="nbr"/>
		<lit-tag v="ND"/>
	      </equal>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="nbr"/>
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	</choose>	
	<out>  
	  <chunk name="pronom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
	      <tag><clip pos="1" side="tl" part="pers"/></tag>	 
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
	      <let>
		<var n="genero"/>
		<clip pos="1" side="tl" part="gen"/>
	      </let>
	      <let>
		<var n="numero"/>
		<clip pos="1" side="tl" part="nbr"/>
	      </let>
      </action>
    </rule>

   
   <rule comment="REGLA: PARTICIPIO (Fatto -> Hecho)"> 
      <pattern>
	<pattern-item n="pp"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="pp" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SA"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_adj"/>
	      <clip pos="1" side="tl" part="temps"/>
	      <clip pos="1" side="tl" part="gen" link-to="2"/>	 
	      <clip pos="1" side="tl" part="nbr" link-to="3"/>	 
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="regla: c'è"> <!-- c'è > hay (tots els temps simples de l'italià))-->
       <pattern>
         <pattern-item n="ci"/>
         <pattern-item n="essere-p3"/>
       </pattern>
       <action>
         <call-macro n="f_concord1">
           <with-param pos="2"/>
         </call-macro>
        <call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>   
	 <let><clip pos="2" side="tl" part="a_verb"/><lit-tag v="vbhaver"/></let>
        <choose>
	<when> 
	  <test>
	    <equal>
	      <clip pos="2" side="tl" part="temps"/>
	      <lit-tag v="pri"/>
	    </equal>
	  </test>
         <out>
           <chunk name="hay" case="caseFirstWord">
             <tags>
               <tag><lit-tag v="SV"/></tag>
             </tags>
               <lu>
                 <lit v="hay"/>
                 <lit-tag v="vblex.pri.p3.sg"/>
               </lu>
           </chunk>
         </out>
	</when>
         <otherwise>
         <out>
           <chunk name="hay" case="caseFirstWord">
             <tags>
               <tag><lit-tag v="SV"/></tag>
             </tags>
               <lu>
                 <lit v="haber"/>
                 <lit-tag v="vbhaver"/>
                 <clip pos="2" side="tl" part="temps"/>
                 <clip pos="2" side="tl" part="pers"/>
                 <lit-tag v="sg"/>
                 <clip pos="2" side="tl" part="lemq"/>
               </lu>
           </chunk>
         </out>
	</otherwise>
      </choose>
        <call-macro n="f_bcond">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
     </action>
    </rule>


    <rule comment="regla: c'è stato"> <!-- c'è stato > ha habido-->
       <pattern>
         <pattern-item n="ci"/>
         <pattern-item n="essere-p3"/>
         <pattern-item n="essere-pp"/>
       </pattern>
       <action>
         <call-macro n="f_concord1">
           <with-param pos="3"/>
         </call-macro>
         <call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>   
	 <let><clip pos="2" side="tl" part="a_verb"/><lit-tag v="vbhaver"/></let>
         <out>
           <chunk name="ha_habido" case="caseFirstWord">
             <tags>
               <tag><lit-tag v="SV"/></tag>
             </tags>
               <lu>
                 <lit v="haber"/>
                 <lit-tag v="vbhaver"/>
                 <clip pos="2" side="tl" part="temps"/>
                 <clip pos="2" side="tl" part="pers"/>
                 <clip pos="2" side="tl" part="nbr"/>
                 <clip pos="2" side="tl" part="lemq"/>
               </lu>
               <b pos="2"/>
               <lu>  
		 <lit v="haber"/>
                 <lit-tag v="vbhaver.pp.m.sg"/>
               </lu>
           </chunk>
         </out>
        <call-macro n="f_bcond">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
     </action>
    </rule>


 <rule comment="regla: c'è adv stato"> <!-- c'è mai stato > ha habido nunca-->
       <pattern>
         <pattern-item n="ci"/>
         <pattern-item n="essere-p3"/>
         <pattern-item n="adv"/>
         <pattern-item n="essere-pp"/>
       </pattern>
       <action>
         <call-macro n="f_concord1">
           <with-param pos="4"/>
         </call-macro>
         <call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>   
	 <let><clip pos="2" side="tl" part="a_verb"/><lit-tag v="vbhaver"/></let>
         <out>
           <chunk name="ha_habido" case="caseFirstWord">
             <tags>
               <tag><lit-tag v="SV"/></tag>
             </tags>
               <lu>
                 <lit v="haber"/>
                 <lit-tag v="vbhaver"/>
                 <clip pos="2" side="tl" part="temps"/>
                 <clip pos="2" side="tl" part="pers"/>
                 <clip pos="2" side="tl" part="nbr"/>
                 <clip pos="2" side="tl" part="lemq"/>
               </lu>
               <b pos="2"/>
               <lu>  
		 <lit v="haber"/>
                 <lit-tag v="vbhaver.pp.m.sg"/>
               </lu>
           </chunk>
           <b pos="3"/> 
           <chunk name="adv" case="caseFirstWord">
             <tags>
               <tag><lit-tag v="ADV"/></tag>
             </tags>
               <lu>
                 <clip pos="3" side="tl" part="whole"/>
               </lu>
           </chunk>
         </out>
        <call-macro n="f_bcond">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
     </action>
    </rule>

  <rule comment="REGLA: VERB ">
      <pattern>
	<pattern-item n="verb"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>     
	<out>
	  <chunk name="verb" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="temps"/>
	      <clip pos="1" side="tl" part="pers"/>
	      <clip pos="1" side="tl" part="gen"/>	 
	      <clip pos="1" side="tl" part="nbr" link-to="5"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>

    <rule comment="REGLA: AVERE BISOGNO DI (Ho bisogno di : necesito">
      <pattern>
	<pattern-item n="avere"/>
	<pattern-item n="bisogno"/>
	<pattern-item n="di"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
        <let>
          <clip pos="1" side="tl" part="lem"/>
          <lit v="necesitar"/>
        </let>
        <let>
          <clip pos="1" side="tl" part="a_verb"/>
          <lit-tag v="vblex"/>
        </let>
	<out>
	  <chunk name="verb" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="sl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="sl" part="temps"/>
	      <clip pos="1" side="sl" part="pers"/>
	      <clip pos="1" side="sl" part="gen"/>	 
	      <clip pos="1" side="tl" part="nbr" link-to="5"/>
	      <clip pos="1" side="sl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
        <call-macro n="f_bcond">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
      </action>
    </rule>


  <rule comment="REGLA: VERB ENC">
     <pattern>
	<pattern-item n="verb"/>
	<pattern-item n="prnenc"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="verb_enc" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
	    </tags>
	    <mlu>
	      <lu>   
		<clip pos="1" side="tl" part="lemh"/> 
		<clip pos="1" side="tl" part="a_verb"/>
		<clip pos="1" side="tl" part="temps"/>
		<clip pos="1" side="tl" part="pers"/>
		<clip pos="1" side="tl" part="gen"/>	 
		<clip pos="1" side="tl" part="nbr" link-to="5"/>
	      </lu> 
	      <lu>
		<clip pos="2" side="tl" part="whole"/> 
		<clip pos="1" side="tl" part="lemq"/>
	      </lu>
	    </mlu>
	  </chunk>
	</out>
      </action>
    </rule> 

  <rule comment="REGLA: VERB ENC A INF (starci a pensare -- pensar">
     <pattern>
	<pattern-item n="stare"/>
	<pattern-item n="prnenc"/>
	<pattern-item n="pr_a"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk namefrom="verb" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
	    </tags>
	      <lu>   
		<clip pos="4" side="tl" part="lemh"/>
		<clip pos="4" side="tl" part="a_verb"/>
		<clip pos="1" side="tl" part="temps"/>
		<clip pos="1" side="tl" part="pers"/>
		<clip pos="1" side="tl" part="gen"/>	 
		<clip pos="1" side="tl" part="nbr" link-to="5"/>
		<clip pos="4" side="tl" part="lemq"/>
	      </lu>
	  </chunk>
	</out>

      </action>
    </rule> 

  <rule comment="REGLA: VERB ENC A INF (stiamo a pensare -- estamos pensando">
     <pattern>
	<pattern-item n="stare"/>
	<pattern-item n="pr_a"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk namefrom="verb" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
	    </tags>
	      <lu>   
		<clip pos="1" side="tl" part="lemh"/>
		<clip pos="1" side="tl" part="a_verb"/>
		<clip pos="1" side="tl" part="temps"/>
		<clip pos="1" side="tl" part="pers"/>
		<clip pos="1" side="tl" part="gen"/>	 
		<clip pos="1" side="tl" part="nbr" link-to="5"/>
	      </lu>
              <b pos="1"/>
 	      <lu>   
		<clip pos="3" side="tl" part="lemh"/>
		<clip pos="3" side="tl" part="a_verb"/>
                <lit-tag v="ger"/>
		<clip pos="3" side="tl" part="lemq"/>
	      </lu>
	  </chunk>
	</out>	
	<call-macro n="f_bcond">
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	</call-macro>
      </action>
    </rule> 

  <rule comment="REGLA: VERB A INF ENC (stiamo a guardarla -- la estamos mirando">
     <pattern>
	<pattern-item n="stare"/>
	<pattern-item n="pr_a"/>
	<pattern-item n="inf"/>
 	<pattern-item n="prnenc"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk namefrom="verb" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
	    </tags>
              <lu>
                <clip pos="4" side="tl" part="lemh"/>
                <lit-tag v="prn.pro"/>  
		<clip pos="4" side="tl" part="pers"/>
		<clip pos="4" side="tl" part="gen"/>	 
		<clip pos="4" side="tl" part="nbr"/>
		
              </lu>
              <b pos="1"/>
	      <lu>   
		<clip pos="1" side="tl" part="lemh"/>
		<clip pos="1" side="tl" part="a_verb"/>
		<clip pos="1" side="tl" part="temps"/>
		<clip pos="1" side="tl" part="pers"/>
		<clip pos="1" side="tl" part="gen"/>	 
		<clip pos="1" side="tl" part="nbr" link-to="5"/>
	      </lu>
              <b pos="2"/>
 	      <lu>   
		<clip pos="3" side="tl" part="lemh"/>
		<clip pos="3" side="tl" part="a_verb"/>
                <lit-tag v="ger"/>
		<clip pos="3" side="tl" part="lemq"/>
	      </lu>
	  </chunk>
	</out>	
	<call-macro n="f_bcond">
	  <with-param pos="2"/>
	  <with-param pos="3"/>
	</call-macro>
      </action>
    </rule> 
    
  <rule comment="REGLA: VERB ENC ENC">
      <pattern>
	<pattern-item n="verb"/>
	<pattern-item n="prnenc"/>
	<pattern-item n="prnenc"/>
      </pattern>
      <action>	
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="verb_enc_enc" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
	    </tags>
	    <mlu>
	      <lu>   
		<clip pos="1" side="tl" part="lemh"/> 
		<clip pos="1" side="tl" part="a_verb"/>
		<clip pos="1" side="tl" part="temps"/>
		<clip pos="1" side="tl" part="pers"/>
		<clip pos="1" side="tl" part="gen"/>	 
		<clip pos="1" side="tl" part="nbr" link-to="5"/>
	      </lu> 
	      <lu>
		<clip pos="2" side="tl" part="whole"/> 
	      </lu>
	      <lu>
		<clip pos="3" side="tl" part="whole"/> 
		<clip pos="1" side="tl" part="lemq"/>
	      </lu>
	    </mlu>
	  </chunk>
	</out>
      </action>
    </rule> 
  
  
 <rule comment="REGLA: ESSERE PP ">
      <pattern>
	<pattern-item n="essere"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	    <in caseless="yes">
	      <clip pos="2" side="sl" part="lem"/>
	      <list n="auxser"/>
	    </in>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lem"/>
	      <lit v="haber"/>
	    </let>
	    <let>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <lit-tag v="vbhaver"/>
	    </let>
	    <let>
	      <var n="lemachunk"/>
	      <lit v="haber_pp"/>
	    </let>
	    <let>
	      <clip pos="2" side="tl" part="gen"/>
	      <lit-tag v="m"/>
	    </let>
	    <let>
	      <clip pos="2" side="tl" part="nbr"/>
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="lemachunk"/>
	      <lit v="estar_pp"/>
	    </let>
	    <let>
	      <clip pos="1" side="tl" part="lemh"/>
	      <lit v="estar"/>
	    </let>
            <let>
              <clip pos="1" side="tl" part="a_verb"/>
	      <lit-tag v="vblex"/>
            </let>
	  </otherwise>
	</choose>
        <choose>
        <when>
	  <test>
          <and>
	    <equal>
	      <clip pos="1" side="sl" part="pers"/>
	      <lit-tag v="p3"/>
	    </equal>
	    <equal>
	      <clip pos="1" side="sl" part="nbr"/>
	      <lit-tag v="pl"/>
	    </equal>
	    <equal>
	      <clip pos="2" side="sl" part="nbr"/>
	      <lit-tag v="sg"/>
	    </equal>
          </and>
	  </test>
	    <let>
	      <clip pos="1" side="tl" part="pers"/>
	      <lit-tag v="p1"/>
	    </let>
        </when>
        <otherwise>
	    <let>
	      <clip pos="1" side="tl" part="pers"/>
	      <clip pos="1" side="tl" part="pers"/>
	    </let>
        </otherwise>
        </choose>
	<out>
	  <chunk namefrom="lemachunk" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="temps"/>
	      <clip pos="1" side="tl" part="pers"/>
	      <clip pos="1" side="tl" part="gen"/>	 
	      <clip pos="2" side="sl" part="nbr"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_verb"/>
	      <clip pos="2" side="tl" part="temps"/>
	      <clip pos="2" side="tl" part="gen"/>	 
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>  


  
 <rule comment="REGLA: ESSERE ADV PP  è mai stato : ha estado nunca ">
      <pattern>
	<pattern-item n="essere"/>
	<pattern-item n="adv"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	    <in caseless="yes">
	      <clip pos="3" side="sl" part="lem"/>
	      <list n="auxser"/>
	    </in>
	    </test>
	    <let>
	      <clip pos="1" side="tl" part="lem"/>
	      <lit v="haber"/>
	    </let>
	    <let>
	      <clip pos="1" side="tl" part="a_verb"/>
	      <lit-tag v="vbhaver"/>
	    </let>
	    <let>
	      <var n="lemachunk"/>
	      <lit v="haber_pp"/>
	    </let>
	    <let>
	      <clip pos="3" side="tl" part="gen"/>
	      <lit-tag v="m"/>
	    </let>
	    <let>
	      <clip pos="3" side="tl" part="nbr"/>
	      <lit-tag v="sg"/>
	    </let>
	  </when>
	  <otherwise>
	    <let>
	      <var n="lemachunk"/>
	      <lit v="estar_pp"/>
	    </let>
	    <let>
	      <clip pos="1" side="tl" part="lemh"/>
	      <lit v="estar"/>
	    </let>
            <let>
              <clip pos="1" side="tl" part="a_verb"/>
	      <lit-tag v="vblex"/>
            </let>
	  </otherwise>
	</choose>
        <choose>
        <when>
	  <test>
          <and>
	    <equal>
	      <clip pos="1" side="sl" part="pers"/>
	      <lit-tag v="p3"/>
	    </equal>
	    <equal>
	      <clip pos="1" side="sl" part="nbr"/>
	      <lit-tag v="pl"/>
	    </equal>
	    <equal>
	      <clip pos="3" side="sl" part="nbr"/>
	      <lit-tag v="sg"/>
	    </equal>
          </and>
	  </test>
	    <let>
	      <clip pos="1" side="tl" part="pers"/>
	      <lit-tag v="p1"/>
	    </let>
        </when>
        <otherwise>
	    <let>
	      <clip pos="1" side="tl" part="pers"/>
	      <clip pos="1" side="tl" part="pers"/>
	    </let>
        </otherwise>
        </choose>
	<out>
	  <chunk namefrom="lemachunk" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
	    </tags>
	    <lu>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="temps"/>
	      <clip pos="1" side="tl" part="pers"/>
	      <clip pos="1" side="tl" part="gen"/>	 
	      <clip pos="3" side="sl" part="nbr"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_verb"/>
	      <clip pos="3" side="tl" part="temps"/>
	      <clip pos="3" side="tl" part="gen"/>	 
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
            <lu>   
	      <clip pos="2" side="tl" part="whole"/> 
	    </lu>
	   
	  </chunk>
	</out>
      </action>
    </rule>  


  
 <rule comment="REGLA: AVERE PP ">
      <pattern>
	<pattern-item n="avere"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk namefrom="haber_pp" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
	    </tags>
	    <lu>   
	      <lit v="haber"/>
              <lit-tag v="vbhaver"/>
	      <clip pos="1" side="tl" part="temps"/>
	      <clip pos="1" side="tl" part="pers"/>
	      <clip pos="1" side="tl" part="gen"/>	 
	      <clip pos="1" side="tl" part="nbr"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_verb"/>
	      <clip pos="2" side="tl" part="temps"/>
	      <clip pos="2" side="tl" part="gen"/>	 
	      <clip pos="2" side="tl" part="nbr"/>
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
      </action>
    </rule>  


  
 <rule comment="REGLA: AVERE ADV PP  ho mai sentito : he eschuchado nunca ">
      <pattern>
	<pattern-item n="avere"/>
	<pattern-item n="adv"/>
	<pattern-item n="pp"/>
      </pattern>
      <action>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk namefrom="haber_pp_adv" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
	    </tags>
	    <lu>   
	      <lit v="haber"/>
              <lit-tag v="vbhaver"/>
	      <clip pos="1" side="tl" part="temps"/>
	      <clip pos="1" side="tl" part="pers"/>
	      <clip pos="1" side="tl" part="gen"/>	 
	      <clip pos="1" side="sl" part="nbr"/>
	    </lu>
	    <b pos="1"/>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_verb"/>
	      <clip pos="3" side="tl" part="temps"/>
	      <clip pos="3" side="tl" part="gen"/>	 
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
            <lu>   
	      <clip pos="2" side="tl" part="whole"/> 
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>  



    <rule comment="REGLA: CONTINUARE/DIVERTIRSI A INFINITIVO -> CONTINUAR GERUNDIO (Continuare a fare -> Continuar haciendo)">
      <pattern>
        <pattern-item n="vb_continuare"/>
        <pattern-item n="pr_a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="verb_continuare_inf" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <lit-tag v="ger"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: CONTARE SU -> CONTAR CON (Conto su -> Contar con)">
      <pattern>
        <pattern-item n="vb_contare"/>
        <pattern-item n="pr_su"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="verb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="con"/>
              <lit-tag v="pr"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: CONTARE SU DI PRN -> CONTAR CON (Conto su di te -> Cuento contigo)">
      <pattern>
        <pattern-item n="vb_contare"/>
        <pattern-item n="pr_su"/>
        <pattern-item n="di"/>
        <pattern-item n="prn"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
	  <call-macro n="f_treuGDND">
	    <with-param pos="4"/>
	  </call-macro>
          <choose>
	  <when>
	    <test>
            <and>
	    <in caseless="yes">
	      <clip pos="4" side="sl" part="lem"/>
	      <list n="prn_mete"/>
	    </in>
	    <equal>
	      <clip pos="4" side="sl" part="nbr"/>
	      <lit-tag v="sg"/>
	    </equal>
            <equal>
	      <clip pos="4" side="sl" part="pers"/>
	      <lit-tag v="p1"/>
	    </equal>
            </and>
	    </test>
            <let>
	      <var n="lema"/>
	      <lit v="conmigo"/>
	    </let>
        <out>
          <chunk name="SV_conmigo" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <var n="lema"/>
              <lit-tag v="prn.tn"/>
              <clip pos="4" side="sl" part="pers"/>
              <clip pos="4" side="sl" part="gen"/>
              <clip pos="4" side="sl" part="nbr"/>
            </lu>
          </chunk>
        </out>


           </when>
           <otherwise>
                 <choose>
	 	 <when>
	    		<test>
            		<and>
	    		  <in caseless="yes">
	      		  <clip pos="4" side="sl" part="lem"/>
	      		  <list n="prn_mete"/>
	    		  </in>
	    		<equal>
	      		  <clip pos="4" side="sl" part="nbr"/>
	      		<lit-tag v="sg"/>
	    		</equal>
            		<equal>
	      		  <clip pos="4" side="tl" part="pers"/>
	      		  <lit-tag v="p2"/>
	    		</equal>
            		</and>
	    		</test>
            		<let>
	      		<var n="lema"/>
	      		<lit v="contigo"/>
	    		</let>
          <out>
          <chunk name="SV_contigo" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <var n="lema"/>
              <lit-tag v="prn.tn"/>
              <clip pos="4" side="sl" part="pers"/>
              <clip pos="4" side="sl" part="gen"/>
              <clip pos="4" side="sl" part="nbr"/>
            </lu>
          </chunk>
        </out>


            	</when>
                <otherwise>

       <out>
          <chunk name="SV_prn" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
             <lit v="con"/>
             <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
            <lu>
             <clip pos="4" side="tl" part="lem"/>
             <clip pos="4" side="tl" part="a_prn"/>
             <clip pos="4" side="tl" part="tipus_prn"/>
             <clip pos="4" side="tl" part="pers"/>
             <clip pos="4" side="tl" part="gen"/>
             <clip pos="4" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>

             </otherwise>
             </choose>
        </otherwise>
        </choose>
      </action>
    </rule>


    <rule comment="REGLA: ESSERE A NOM (Essere a casa -> Estar en casa)">
      <pattern>
        <pattern-item n="essere"/>
        <pattern-item n="pr_a"/>
        <pattern-item n="nom-np"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="verb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
            </tags>
            <lu>
              <lit v="estar"/>
              <lit-tag v="vblex"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          <b pos="1"/>
                <lu>
                  <lit v="en"/>
                  <lit-tag v="pr"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
              </chunk>
            </out>
      </action>
    </rule>
    
    
    
    <rule comment="REGLA: VENIRE PP (Viene detto -> Se dice      )">
      <pattern>
        <pattern-item n="venire"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="venire" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
            </tags>
            <lu>
              <lit v="se"/>
              <lit-tag v="prn.pro.ref.p3.mf.sp"/>
            </lu>
          <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
              </chunk>
            </out>
      </action>
    </rule>

<!--    <rule comment="REGLA: ESSERE ADJ (Essere carino -> Ser agradable)">
      <pattern>
        <pattern-item n="essere"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="verb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_verb"/></tag>
              <tag><clip pos="1" side="tl" part="temps"/></tag>
              <tag><clip pos="1" side="tl" part="pers"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>	      
            </tags>
            <lu>
              <lit v="estar"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
          <b pos="1"/>
        </out>
        <call-macro n="firstWord">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="adj" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule> -->

 <rule> <!-- REGLA: RELATIVO-->
      <pattern>
	<pattern-item n="rel"/>
      </pattern>
      <action> 
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
    <call-macro n="f_treuGDND">
	<with-param pos="1"/>
    </call-macro>
	<out>
	  <chunk name="rel" case="caseFirstWord">
	    <tags>
	      <tag><clip pos="1" side="tl" part="tipus_prn"/></tag>
	      <tag><clip pos="1" side="tl" part="gen"/></tag>
	      <tag><clip pos="1" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>	      
	      <clip pos="1" side="tl" part="lem"/>
	      <clip pos="1" side="tl" part="tipus_prn"/>
	      <clip pos="1" side="tl" part="gen"/>
	      <clip pos="1" side="tl" part="nbr"/>
	    </lu>
	  </chunk>
	</out>
      </action>
</rule>
 

    <rule comment="REGLA: DET/NUM/ADJ NOM FA ">
      <pattern>
	<pattern-item n="adjdetnum"/>
	<pattern-item n="nom"/>
	<pattern-item n="fare"/>
      </pattern>
      <action>
	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<choose>
	  <when>
	    <test>
	      <in caseless="yes">
		<clip pos="2" side="sl" part="lem"/>
		<list n="temporales"/>
	      </in>
	    </test>
	    <out>
	      <chunk name="det_temp_fa" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SADV"/></tag>	      
	    </tags>
	    <lu>   
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_verb"/>
	      <clip pos="3" side="tl" part="temps"/>
	      <clip pos="3" side="tl" part="pers"/>
	      <clip pos="3" side="tl" part="gen"/>	 
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu>
           <b pos="1"/>
	    <lu>    
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	    <b pos="2"/>
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>	 
	      <clip pos="2" side="tl" part="nbr"/>	 
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	  </chunk>
	</out>
	  </when>
	  <otherwise>
	<out>
	  <chunk name="det_nom_fa" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><clip pos="3" side="tl" part="temps"/></tag>
              <tag><clip pos="3" side="tl" part="pers"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>    
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	    <b pos="1"/> 
	    <lu>
	      <clip pos="3" side="tl" part="lemh"/> 
	      <clip pos="3" side="tl" part="a_nom"/>
	      <clip pos="3" side="tl" part="gen"/>	 
	      <clip pos="3" side="tl" part="nbr"/>	 
	      <clip pos="3" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
	    <lu>   
	      <clip pos="1" side="tl" part="lemh"/> 
	      <clip pos="1" side="tl" part="a_verb"/>
	      <clip pos="1" side="tl" part="temps"/>
	      <clip pos="1" side="tl" part="pers"/>
	      <clip pos="1" side="tl" part="gen"/>	 
	      <clip pos="1" side="tl" part="nbr"/>
	      <clip pos="1" side="tl" part="lemq"/>
	    </lu>
	  </chunk>
	</out>
	  </otherwise>

	</choose>
      </action>
    </rule>
  
    <rule comment="REGLA: DET/NUM/ADJ NOM FA ">
      <pattern>
	<pattern-item n="adjdetnum"/>
	<pattern-item n="nom"/>
	<pattern-item n="fare"/>
	<pattern-item n="inf"/>
      </pattern>
      <action>
	<call-macro n="f_concord2">
	  <with-param pos="2"/>
	  <with-param pos="1"/>
	</call-macro>
	<call-macro n="firstWord">
	  <with-param pos="1"/>
	</call-macro>
	<out>
	  <chunk name="det_nom" case="caseFirstWord">
	    <tags>
	      <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_verb"/></tag>
              <tag><clip pos="2" side="tl" part="temps"/></tag>
              <tag><clip pos="2" side="tl" part="pers"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
	    </tags>
	    <lu>    
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	    <b pos="1"/> 
	    <lu>
	      <clip pos="2" side="tl" part="lemh"/> 
	      <clip pos="2" side="tl" part="a_nom"/>
	      <clip pos="2" side="tl" part="gen"/>	 
	      <clip pos="2" side="tl" part="nbr"/>	 
	      <clip pos="2" side="tl" part="lemq"/>
	    </lu> 
	    <b pos="2"/>
	  </chunk>
	    <b pos="3"/>
          <chunk name="verb" case="caseFirstWord">
           <tags>
              <tag><clip pos="4" side="tl" part="a_verb"/></tag>
              <tag><clip pos="4" side="tl" part="temps"/></tag>
              <tag><clip pos="4" side="tl" part="pers"/></tag>
              <tag><clip pos="4" side="tl" part="nbr"/></tag>
            </tags>
	    <lu>   
	      <clip pos="4" side="tl" part="lemh"/> 
	      <clip pos="4" side="tl" part="a_verb"/>
	      <clip pos="3" side="tl" part="temps"/>
	      <clip pos="3" side="tl" part="pers"/>
	      <clip pos="3" side="tl" part="gen"/>	 
	      <clip pos="3" side="tl" part="nbr"/>
	      <clip pos="4" side="tl" part="lemq"/>
	    </lu>
          </chunk>
       </out>
      </action>
    </rule>
  


    <rule> <!-- REGLA: reset variables-->
      <pattern>
	<pattern-item n="sent"/>
      </pattern>
      <action>
	<let>
	  <clip pos="1" side="sl" part="nbr"/>
	  <lit-tag v="sg"/>
	</let>
	<let>
	  <var n="genero"/>
	  <lit-tag v="m"/>
	</let>
	<choose>
	  <when>
	    <test>
	      <not>
		<or>
		  <equal>
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v=";"/>
		  </equal>
		  <equal>
		    <clip pos="1" side="sl" part="lem"/>
		    <lit v=":"/>
		  </equal>
		</or>
	      </not>
	    </test>
	    <let>
	      <var n="EOS"/>
	      <lit v="true"/>
	    </let>
	  </when>
	</choose>
	<out>
	  <chunk name="punt">
	    <tags>
	      <tag><lit-tag v="sent"/></tag>
	    </tags>
	    <lu>
	      <clip pos="1" side="tl" part="whole"/>
	    </lu>
	  </chunk>
	</out>
      </action>
    </rule>

  </section-rules>
</transfer>
